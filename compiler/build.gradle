apply plugin: 'java'

sourceSets.main.java.srcDirs = ["src"]

tasks.withType(JavaCompile) {
	options.compilerArgs.addAll(
			"--add-exports", "jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.jvm=ALL-UNNAMED",
			"--add-exports", "jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED",
			"--add-exports", "java.base/sun.reflect.annotation=ALL-UNNAMED",
			"--add-exports", "java.base/jdk.internal.module=ALL-UNNAMED",
			"--add-exports", "jdk.jfr/jdk.jfr.internal=ALL-UNNAMED"
	)
}

dependencies {
	implementation project(":annotations")

//	compileOnly 'com.google.auto.service:auto-service:1.0.1'
//	annotationProcessor 'com.google.auto.service:auto-service:1.0.1'
	compileOnly files("../_libs/auto-service-1.1.1.jar")
	annotationProcessor files("../_libs/auto-service-1.1.1.jar")

	annotationProcessor "com.github.EB-wilson.UniverseCore:annotations:$uncVersion"

	implementation "com.github.Anuken.Arc:arc-core:$mindustryVersion"
//	implementation "com.github.Anuken.Mindustry:core:$mindustryVersion"

	// only for document
	compileOnly files(
			new File(parent.buildDir0, "libs/${project.name}-1.0.jar")
	)
}